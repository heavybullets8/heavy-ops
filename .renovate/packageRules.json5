{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "packageRules": [
    {
      "description": ["Custom schedule for frequently updated container digests"],
      "matchDataSources": ["docker"],
      "matchPackageNames": ["/postgresql/", "/tensorchord/"],
      "matchUpdateTypes": ["digest"],
      "schedule": ["every 3 months on the first day of the month"]
    },
    {
      "description": ["PostgreSQL - use loose versioning"],
      "matchDatasources": ["docker"],
      "matchDepNames": ["ghcr.io/cloudnative-pg/postgresql"],
      "versioning": "loose"
    },
    {
      "description": ["vchord-scratch - PG-major-aware regex versioning"],
      "matchDatasources": ["docker"],
      "matchDepNames": ["ghcr.io/tensorchord/vchord-scratch"],
      "versioning": "regex:^pg(?<major>\\d+)-v(?<minor>\\d+)\\.(?<patch>\\d+)\\.(?<build>\\d+)$"
    },
    {
      "description": ["Pair Postgres/vchord PG major upgrades in a single PR"],
      "matchDatasources": ["docker"],
      "matchDepNames": [
        "ghcr.io/cloudnative-pg/postgresql",
        "ghcr.io/tensorchord/vchord-scratch"
      ],
      "matchUpdateTypes": ["major"],
      "groupName": "Postgres/vchord PG-major upgrades"
    }
  ]
}
