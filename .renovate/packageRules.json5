{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "packageRules": [
    {
      "description": ["Custom schedule for frequently updated container digests"],
      "matchDataSources": ["docker"],
      "matchPackageNames": ["/postgresql/", "/tensorchord/"],
      "matchUpdateTypes": ["digest"],
      "schedule": ["every 3 months on the first day of the month"]
    },
    {
      "description": ["Throttle hotio/cloudflareddns digest updates to weekly"],
      "matchDatasources": ["docker"],
      "matchPackageNames": ["ghcr.io/hotio/cloudflareddns"],
      "matchUpdateTypes": ["digest"],
      "schedule": ["every week"]
    },
    {
      "description": ["PostgreSQL"],
      "matchDatasources": ["docker"],
      "matchDepNames": ["ghcr.io/cloudnative-pg/postgresql"],
      "versioning": "loose",
      "allowedVersions": "/^\\d+\\.\\d+-standard-trixie$/"
    },
    {
      "description": ["vchord-scratch"],
      "matchDatasources": ["docker"],
      "matchDepNames": ["ghcr.io/tensorchord/vchord-scratch"],
      "versioning": "regex:^pg(?<major>\\d+)-v(?<minor>\\d+)\\.(?<patch>\\d+)\\.(?<build>\\d+)$"
    },
    {
      "description": ["Group Postgres/vchord updates"],
      "matchDatasources": ["docker"],
      "matchDepNames": [
        "ghcr.io/cloudnative-pg/postgresql",
        "ghcr.io/tensorchord/vchord-scratch"
      ],
      "groupName": "CloudNativePG"
    }
  ]
}
